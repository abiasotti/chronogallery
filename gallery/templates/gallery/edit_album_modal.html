<div id="edit-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:100; align-items:center; justify-content:center;">
    <div style="background:#fff; padding:32px 24px; border-radius:8px; box-shadow:0 2px 16px rgba(0,0,0,0.15); min-width:320px; text-align:center;">
        <h2 style="margin-top:0;">Edit Album</h2>
        <form method="post" action="{% url 'gallery:album_edit' album.id %}" style="margin-top:24px;">
            {% csrf_token %}
            <p>
                <label for="id_title">Album Name:</label><br>
                <input type="text" name="title" id="id_title" value="{{ album.title }}" style="width: 90%; padding: 8px; margin-top: 4px;">
            </p>
            <p>
                <label for="id_cover">Album Cover:</label><br>
                <select name="cover" id="id_cover" style="width: 90%; padding: 8px; margin-top: 4px;">
                    <option value="">-- No Change --</option>
                    {% for photo in photos %}
                        <option value="{{ photo.id }}" {% if album.cover and photo.image.url == album.cover.url %}selected{% endif %}>Photo #{{ photo.id }}</option>
                    {% endfor %}
                </select>
            </p>
            <div style="margin-top: 24px; display: flex; justify-content: center; gap: 16px;">
                <button type="button" id="cancel-edit" style="padding:8px 24px; background:#eee; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
                <button type="submit" style="padding:8px 24px; background:#222; color:#fff; border:none; border-radius:4px; cursor:pointer;">Save</button>
            </div>
        </form>
        <hr style="margin: 32px 0 16px 0;">
        <form method="post" action="{% url 'gallery:album_delete' album.id %}" style="margin-top:0;">
            {% csrf_token %}
            <button type="button" id="delete-edit-btn" style="padding:8px 24px; background:#c00; color:#fff; border:none; border-radius:4px; cursor:pointer;">Delete Album</button>
        </form>
        <!-- Delete confirmation modal inside edit modal -->
        <div id="edit-delete-modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:200; align-items:center; justify-content:center;">
            <div style="background:#fff; padding:32px 24px; border-radius:8px; box-shadow:0 2px 16px rgba(0,0,0,0.15); min-width:320px; text-align:center;">
                <h2 style="margin-top:0;">Delete Album?</h2>
                <p>This will permanently delete the album and all its photos. This action cannot be undone.</p>
                <form method="post" action="{% url 'gallery:album_delete' album.id %}" style="margin-top:24px;">
                    {% csrf_token %}
                    <button type="button" id="cancel-edit-delete" style="padding:8px 24px; margin-right:16px; background:#eee; border:none; border-radius:4px; cursor:pointer;">Cancel</button>
                    <button type="submit" style="padding:8px 24px; background:#c00; color:#fff; border:none; border-radius:4px; cursor:pointer;">Delete</button>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    // Edit modal logic (to be included in album_detail.html)
    window.setupEditModal = function() {
        const editModal = document.getElementById('edit-modal');
        const cancelEdit = document.getElementById('cancel-edit');
        const deleteEditBtn = document.getElementById('delete-edit-btn');
        const editDeleteModal = document.getElementById('edit-delete-modal');
        const cancelEditDelete = document.getElementById('cancel-edit-delete');
        if (editModal && cancelEdit) {
            cancelEdit.addEventListener('click', function(e) {
                e.preventDefault();
                editModal.style.display = 'none';
            });
        }
        if (deleteEditBtn && editDeleteModal) {
            deleteEditBtn.addEventListener('click', function(e) {
                e.preventDefault();
                editDeleteModal.style.display = 'flex';
            });
        }
        if (cancelEditDelete && editDeleteModal) {
            cancelEditDelete.addEventListener('click', function(e) {
                e.preventDefault();
                editDeleteModal.style.display = 'none';
            });
        }
    }
</script> 